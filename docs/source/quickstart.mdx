---
title: Apollo MCP Server Quickstart
subtitle: Create and run an MCP server in minutes with Apollo
---

Apollo MCP Server is a [Model Context Protocol](https://modelcontextprotocol.io/) server that exposes your GraphQL API operations as MCP tools.

This guide walks you through the process of creating, running and configuring an MCP server with Apollo.

## Prerequisites

- [Rover CLI](/rover/getting-started) v0.36 or later. We'll use Rover to initialize a project and run the MCP server.
- [Node.js](https://nodejs.org/) v18 or later (for `mcp-remote`)
- [Claude Desktop](https://claude.ai/download) or another MCP-compatible client

## Step 1: Create an MCP server

Run the interactive initialization command:

```bash showLineNumbers=false
rover init --mcp
```

The CLI wizard guides you through several prompts. 

Select **Create MCP tools from a new Apollo GraphOS project** and **Apollo graph with Connectors (connect to REST services)** as your starting point.

You'll also need to select your organization and give your project a name and ID.

The wizard shows all files that will be created, including:

- MCP server configuration files
- GraphQL schema and operations
- Docker setup for (optional) deployment

Type `Y` to confirm and create your project files.

## Step 2: Run your MCP Server

You can start your MCP server locally with `rover dev`.

Choose the environment-specific command to load environment variables from the provided `.env` file and start the MCP server.

<Tabs>

    <Tab label="Linux / MacOS">
    
    ```terminal showLineNumbers=false
    set -a && source .env && set +a && rover dev --supergraph-config supergraph.yaml --mcp .apollo/mcp.local.yaml
    ```

    </Tab>

    <Tab label="Windows Powershell">

    ```terminal showLineNumbers=false
    Get-Content .env | ForEach-Object { $name, $value = $_.split('=',2); [System.Environment]::SetEnvironmentVariable($name, $value) }
    rover dev --supergraph-config supergraph.yaml --mcp .apollo/mcp.local.yaml
    ```
    </Tab>
    
</Tabs>

You should see some output indicating that the GraphQL server is running at `http://localhost:4000` and the MCP server is running at `http://127.0.0.1:5050`.

### Verify with MCP Inspector

In a new terminal window, run the MCP Inspector:

```terminal showLineNumbers=false
npx @modelcontextprotocol/inspector http://127.0.0.1:5050/mcp --transport http
```

This will automatically open your browser to `http://127.0.0.1:6274`.

Click **Connect**, then **List Tools** to see the available tools.

## Step 3: Connect to Claude Desktop

Apollo MCP Server works with any MCP-compatible client. Choose your favorite client and follow the instructions to connect.

<ExpansionPanel title="Claude Desktop">

Open the `claude_desktop_config.json` file in one of the following paths:

- Mac OS: `~/Library/Application\ Support/Claude/claude_desktop_config.json`
- Windows: `%APPDATA%\Claude\claude_desktop_config.json`
- Linux: `~/.config/Claude/claude_desktop_config.json`

Copy the configuration:

```json
{
  "mcpServers": {
    "mcp-My API": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "http://127.0.0.1:5050/mcp"
      ]
    }
  }
}
```

</ExpansionPanel>

<ExpansionPanel title="Claude Code">
Install using the CLI:

```bash
claude mcp add apollo-mcp npx mcp-remote http://127.0.0.1:5050/mcp
```
</ExpansionPanel>

<ExpansionPanel title="Cursor">
Click the button to quick install:

<a href="cursor://anysphere.cursor-deeplink/mcp/install?name=apollo-mcp&config=eyJjb21tYW5kIjoibnB4IG1jcC1yZW1vdGUgaHR0cDovLzEyNy4wLjAuMTo1MDUwL21jcCJ9">
  <img
    src="https://cursor.com/deeplink/mcp-install-dark.svg"
    alt="Install Apollo MCP Server"
    width="200"
  />
</a>

Or install manually:

1. Go to **Cursor Settings** → **MCP** → **Add new MCP Server**
2. Name: `Apollo MCP` (choose a title)
3. Command: `npx`
4. Arguments: `["mcp-remote", "http://127.0.0.1:5050/mcp"]`
</ExpansionPanel>

<ExpansionPanel title="Goose">
Add Apollo MCP Server to your Goose configuration. Edit your `~/.config/goose/profiles.yaml`:

```yaml
default:
  provider: openai
  processor: gpt-4
  accelerator: gpt-4o-mini
  moderator: passive
  toolkits:
    - name: developer
    - name: mcp
      requires:
        apollo-mcp:
          command: npx
          args:
            - mcp-remote
            - http://127.0.0.1:5050/mcp
```

Or use the Goose CLI to add the MCP server:

```bash
goose mcp add apollo-mcp npx mcp-remote http://127.0.0.1:5050/mcp
```
</ExpansionPanel>

<ExpansionPanel title="Cline (VS Code Extension)">
1. Go to **Advanced settings** → **Extensions** → **Add custom extension**
2. Name: `Apollo MCP`
3. Type: **STDIO**
4. Command: `npx mcp-remote http://127.0.0.1:5050/mcp`
</ExpansionPanel>

<ExpansionPanel title="OpenCode">
Edit `~/.config/opencode/opencode.json`:

```json
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "apollo-mcp": {
      "type": "local", 
      "command": [
        "npx",
        "mcp-remote",
        "http://127.0.0.1:5050/mcp"
      ],
      "enabled": true
    }
  }
}
```
</ExpansionPanel>

<ExpansionPanel title="Windsurf">
1. Go to **Windsurf Settings → MCP → Add new MCP Server**
2. Name: `Apollo MCP`
3. Command: `npx`
4. Arguments: `["mcp-remote", "http://127.0.0.1:5050/mcp"]`

Alternatively, edit your Windsurf configuration file directly:

```json
{
  "mcpServers": {
    "apollo-mcp": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "http://127.0.0.1:5050/mcp"
      ]
    }
  }
}
```
</ExpansionPanel>

1. Restart your MCP client 
1. Test the connection by asking: "What MCP tools do you have available?"
1. Verify GraphQL operations are listed as available tools
1. Test a query using one of your configured operations

## Configuration options

When using Apollo MCP Server, you can customize the server configuration through your `config.yaml` file - see the [YAML Config Reference page](./config-file) for a list of options.

Examples:

<details>
<summary>Basic Configuration</summary>

```yaml
endpoint: https://your-graphql-endpoint.com/graphql
operations:
  source: local
  paths:
    - ./operations
schema:
  source: local
  path: ./schema.graphql
transport:
  type: http
  port: 5050
```
</details>
<details>
<summary>Advanced Configuration</summary>

```yaml
endpoint: https://your-graphql-endpoint.com/graphql
operations:
  source: local
  paths:
    - ./operations
schema:
  source: local
  path: ./schema.graphql
transport:
  type: http
  port: 5050
  host: localhost
headers:
  Authorization: Bearer ${GRAPHQL_TOKEN}
  X-API-Key: ${API_KEY}
timeout: 30000
retry:
  attempts: 3
  delay: 1000
```

</details>

<details>
<summary>Environment Variables</summary>

You can use environment variables in your configuration:

```yaml
endpoint: ${GRAPHQL_ENDPOINT}
headers:
  Authorization: Bearer ${GRAPHQL_TOKEN}
```

Set these in your environment:
```bash
export GRAPHQL_ENDPOINT="https://your-api.com/graphql"
export GRAPHQL_TOKEN="your-token-here"
```
</details>

## Troubleshooting

<details>
<summary>Common Issues</summary>

**Client doesn't see tools:**
- Ensure you restarted your MCP client after configuration
- Verify the Apollo MCP Server is running (`rover dev` command)
- Check port numbers match between server and client config

**Connection refused errors:**
- Confirm the server is running on the correct port (default: 5050)
- Verify firewall settings allow connections to localhost:5050
- For remote connections, ensure the host is set to `0.0.0.0` in your config

**GraphQL operation errors:**
- Verify your operations files exist in the specified paths
- Check that operation names match your GraphQL schema
- Ensure your GraphQL endpoint is accessible

**Authentication issues:**
- Verify environment variables are properly set
- Check that your GraphQL endpoint accepts the provided headers
- When using `rover dev` you can test your GraphQL endpoint using GraphOS Sandbox at [http://localhost:4000](http://localhost:4000)
</details>

## Step 4: Working with MCP Tools

Now that your MCP server is connected, learn how to customize and create tools.

### Understanding Tools

MCP tools are GraphQL operations that Claude can execute. Each operation in your `operations/` directory becomes a tool with:

- **Tool name**: Derived from the operation name
- **Description**: From GraphQL comments or operation descriptions
- **Parameters**: Mapped from GraphQL variables
- **Response**: The GraphQL response data

### Defining Custom Tools

Create new tools by adding GraphQL operation files to your `operations/` directory:

```graphql
# operations/GetProducts.graphql

# Retrieves product information by ID
query GetProducts($productId: ID!) {
  product(id: $productId) {
    id
    name
    price
    description
  }
}
```

Apollo MCP Server automatically detects new `.graphql` files and exposes them as tools. No server restart needed!

**Learn more:** [Defining MCP Tools](https://www.apollographql.com/docs/apollo-mcp-server/define-tools)

### Testing Operations in GraphOS Studio

The `rover dev` command command includes Sandbox:

1. Open http://localhost:4000 in your browser
2. Test your operations directly:
   - Browse your schema
   - Run queries and mutations
   - Experiment with variables
   - View responses

This is invaluable for:
- Verifying operations before exposing them as MCP tools
- Understanding your schema structure
- Debugging query issues
- Exploring available data

## Step 5: Deploy Your MCP Server

Once you're ready to deploy, Apollo MCP Server can run in any container environment.

### Using the Apollo Runtime Container

Your project includes a pre-configured `mcp.Dockerfile` for easy deployment. This container includes:

- Apollo Router for serving your GraphQL API
- Apollo MCP Server for MCP protocol support
- All necessary dependencies

**Build the container:**
```bash
docker build -f mcp.Dockerfile -t my-mcp-server .
```

**Run locally:**
```bash
docker run -p 4000:4000 -p 5050:5050 \
  -e APOLLO_KEY=$APOLLO_KEY \
  -e APOLLO_GRAPH_REF=$APOLLO_GRAPH_REF \
  -e MCP_ENABLE=1 \
  my-mcp-server
```

**Deploy to your platform:**

The container can be deployed to any platform supporting Docker:
- AWS ECS/Fargate
- Google Cloud Run
- Azure Container Instances
- Kubernetes
- Fly.io
- Railway
- Render

### Update Client Configuration

After deploying, update your MCP client configuration to use the deployed URL:

```json
{
  "mcpServers": {
    "my-api": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://your-deployed-server.com/mcp"
      ]
    }
  }
}
```

### Environment Variables

Ensure these variables are set in your deployment environment:

| Variable | Description | Required |
|----------|-------------|----------|
| `APOLLO_KEY` | Your graph's API key | Yes |
| `APOLLO_GRAPH_REF` | Your graph reference | Yes |
| `APOLLO_MCP_TRANSPORT__PORT` | MCP server port (default: 5050) | No |
| `APOLLO_ROUTER_PORT` | Router port (default: 4000) | No |

For more deployment options, see the [Deploy the MCP Server](.deploy) page.

## Additional resources

- [Tutorial: Getting started with MCP and GraphQL](https://www.apollographql.com/tutorials/intro-mcp-graphql)
- [Tutorial: Agentic GraphQL: MCP for the Enterprise](https://www.apollographql.com/tutorials/enterprise-mcp-graphql)
- [Blog: Getting Started with Apollo MCP Server](https://www.apollographql.com/blog/getting-started-with-apollo-mcp-server-for-any-graphql-api)

### Getting help

If you're still having issues:

- Check [Apollo MCP Server GitHub issues](https://github.com/apollographql/apollo-mcp-server/issues)
- Join the [Apollo community forums](https://community.apollographql.com/c/mcp-server/41)
- Contact your Apollo representative for direct support
